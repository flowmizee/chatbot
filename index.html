<!DOCTYPE html>
<html lang="pt-BR">  
  <head>  
    <meta charset="UTF-8" />  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>  
    <title>Chat Web Estilo WhatsApp</title>  
    <style>  
      html, body {  
        margin: 0;  
        padding: 0;  
        font-family: 'Segoe UI', sans-serif;  
        height: 100%;  
        background-color: #ece5dd;  
      }  
      body {  
        display: flex;  
        justify-content: center;  
        align-items: center;  
      }  
      .chat-container {  
        width: 100%;  
        height: 100dvh;  
        max-width: 430px;  
        background-color: #fff;  
        display: flex;  
        flex-direction: column;  
        box-shadow: 0 0 10px rgba(0,0,0,0.2);  
      }  
      .chat-header {  
        background-color: #075E54;  
        padding: 10px 15px;  
        display: flex;  
        align-items: center;  
        color: white;  
      }  
      .chat-header img {  
        width: 45px;  
        height: 45px;  
        border-radius: 50%;  
        margin-right: 12px;  
        object-fit: cover;  
      }  
      .chat-header .name {  
        font-size: 18px;  
        font-weight: bold;  
      }  
      .chat-body {  
        flex: 1;  
        padding: 15px;  
        overflow-y: auto;  
        background-color: #e5ddd5;  
        display: flex;  
        flex-direction: column;  
      }  
      .message {  
        max-width: 75%;  
        padding: 10px 14px;  
        margin-bottom: 8px;  
        font-size: 15px;  
        border-radius: 8px;  
        line-height: 1.4;  
        word-wrap: break-word;  
      }  
      .user {  
        align-self: flex-end;  
        background-color: #dcf8c6;  
        border-bottom-right-radius: 0;  
      }  
      .bot {  
        align-self: flex-start;  
        background-color: white;  
        border-bottom-left-radius: 0;  
      }  
      .typing-indicator {  
        align-self: flex-start;  
        background-color: white;  
        border-bottom-left-radius: 0;  
        max-width: 50px;  
        height: 24px;  
        display: flex;  
        align-items: center;  
        justify-content: center;  
        border-radius: 8px;  
        margin-bottom: 8px;  
        padding: 5px 10px;  
      }  
      .typing-indicator span {  
        display: inline-block;  
        width: 6px;  
        height: 6px;  
        margin: 0 1px;  
        background-color: #999;  
        border-radius: 50%;  
        animation: blink 1.4s infinite both;  
      }  
      .typing-indicator span:nth-child(2) {  
        animation-delay: 0.2s;  
      }  
      .typing-indicator span:nth-child(3) {  
        animation-delay: 0.4s;  
      }  
      @keyframes blink {  
        0%, 80%, 100% { opacity: 0; }  
        40% { opacity: 1; }  
      }  
      .chat-footer {  
        display: flex;  
        padding: 8px 10px;  
        background-color: #fff;  
        border-top: 1px solid #ccc;  
      }  
      .chat-footer input {  
        flex: 1;  
        padding: 12px;  
        border: none;  
        font-size: 16px;  
        border-radius: 20px;  
        margin-right: 8px;  
        background-color: #f0f0f0;  
        outline: none;  
      }  
      .chat-footer button {  
        background-color: #075E54;  
        color: white;  
        border: none;  
        padding: 10px 16px;  
        font-size: 16px;  
        border-radius: 20px;  
        cursor: pointer;  
      }  
      .chat-footer button:hover {  
        background-color: #0b7a67;  
      }  
      .option-buttons {  
        display: flex;  
        gap: 10px;  
        margin-top: 10px;  
        flex-wrap: wrap;  
      }  
      .option-button {  
        background-color: #075E54;  
        color: white;  
        border: none;  
        padding: 8px 12px;  
        border-radius: 20px;  
        cursor: pointer;  
        font-size: 14px;  
      }  
      .option-button:hover {  
        background-color: #0b7a67;  
      }  
      .preview-image {  
        max-width: 100%;  
        border-radius: 8px;  
        margin-top: 10px;  
      }  
      .buy-button {  
        background-color: #25D366;  
        color: white;  
        border: none;  
        padding: 12px 20px;  
        border-radius: 20px;  
        cursor: pointer;  
        font-size: 16px;  
        font-weight: bold;  
        margin-top: 15px;  
        display: inline-block;  
        width: 100%;  
        text-align: center;  
      }  
      .buy-button:hover {  
        background-color: #128C7E;  
      }  
      .testimonial-image {  
        max-width: 100%;  
        border-radius: 8px;  
        margin-top: 10px;  
        border: 2px solid #075E54;  
      }  
      .profile-image {  
        max-width: 200px;  
        border-radius: 8px;  
        margin-top: 10px;  
        border: 2px solid #075E54;  
      }  
      .audio-message {  
        display: flex;  
        align-items: center;  
        background-color: white;  
        padding: 10px 15px;  
        border-radius: 15px;  
        margin-bottom: 8px;  
        max-width: 300px;  
        width: 250px;  
      }  
      .audio-message .play-button {  
        width: 30px;  
        height: 30px;  
        background-color: #25D366;  
        border-radius: 50%;  
        display: flex;  
        justify-content: center;  
        align-items: center;  
        margin-right: 10px;  
        cursor: pointer;  
      }  
      .audio-message .play-button.playing {  
        background-color: #f44336;  
      }  
      .audio-message .play-button::after {  
        content: '';  
        width: 0;  
        height: 0;  
        border-top: 7px solid transparent;  
        border-left: 12px solid white;  
        border-bottom: 7px solid transparent;  
        margin-left: 2px;  
      }  
      .audio-message .play-button.playing::after {  
        content: '';  
        width: 10px;  
        height: 10px;  
        background-color: white;  
        border: none;  
      }  
      .audio-message .audio-info {  
        flex: 1;  
      }  
      .audio-message .audio-wave {  
        display: flex;  
        align-items: center;  
        height: 30px;  
        width: 100%;  
      }  
      .audio-message .audio-wave span {  
        display: inline-block;  
        width: 2px;  
        margin-right: 1px;  
        background-color: #075E54;  
        border-radius: 2px;  
      }  
      .recording-indicator {  
        display: flex;  
        align-items: center;  
        background-color: rgba(0,0,0,0.05);  
        padding: 8px;  
        border-radius: 15px;  
        margin-bottom: 8px;  
        max-width: 40px;  
      }  
      .recording-indicator .recording-dot {  
        width: 12px;  
        height: 12px;  
        background-color: #f44336;  
        border-radius: 50%;  
        animation: pulse 1.5s infinite ease-in-out;  
      }  
      @keyframes pulse {  
        0%, 100% { opacity: 1; }  
        50% { opacity: 0.3; }  
      }  
      .buy-options {  
        display: flex;  
        flex-direction: column;  
        gap: 10px;  
        margin-top: 15px;  
      }  
    </style>  
  </head>  
  <body>  
    <div class="chat-container">  
      <div class="chat-header">  
        <img src="perfil.webp" alt="Perfil">  
        <div class="name">Chef Larissa Campos</div>  
      </div>  
      <div class="chat-body" id="chatBody"></div>  
      <div class="chat-footer">  
        <input type="text" id="userInput" placeholder="Digite sua mensagem..." onkeypress="handleKeyPress(event)">  
        <button onclick="sendMessage()" id="sendButton">Enviar</button>  
      </div>  
    </div>  
    <script>  
      const GEMINI_API_KEY = 'AIzaSyBZWq79odwHX5NnccXU_1Y9_SSYAAuPg3Q';  
      const GEMINI_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';  
      const CHECKOUT_BASICO = 'https://pay.kiwify.com.br/N7XBarb';  
      const CHECKOUT_COMPLETO = 'https://pay.kiwify.com.br/6LNnHnj';  
      let isWaitingResponse = false;  
      let typingEl = null;  
      let conversationStage = 0; // 0 = in√≠cio, 1 = j√° viu detalhes via bot√£o, 2 = est√°gio final compra  
      let currentPackage = 'basico';  
      let activeAudio = null;  
      let audioEndListener = null;  
      let lastOptionSelected = null;  
      // flags para controle de exibi√ß√£o inicial via bot√£o  
      let shownBasicoDetails = false;  
      let shownCompletoDetails = false;  

      // √Åudios para fluxo de bot√µes  
      const audioPrevia = new Audio('previa.mp3');  
      const audioGuia = new Audio('guia.mp3');  
      const audioVoice1 = new Audio('voice1.mp3');  

      [audioPrevia, audioGuia, audioVoice1].forEach(audio => {  
        audio.addEventListener('play', function() {  
          if (activeAudio && activeAudio !== this) {  
            activeAudio.pause();  
            const playButtons = document.querySelectorAll('.play-button');  
            playButtons.forEach(btn => btn.classList.remove('playing'));  
          }  
          activeAudio = this;  
          const playButton = document.querySelector(`audio[src="${this.src}"]`)?.parentElement.querySelector('.play-button');  
          if (playButton) playButton.classList.add('playing');  
        });  
        audio.addEventListener('ended', function() {  
          const playButton = document.querySelector(`audio[src="${this.src}"]`)?.parentElement.querySelector('.play-button');  
          if (playButton) playButton.classList.remove('playing');  
          if (audioEndListener) { audioEndListener(); audioEndListener = null; }  
        });  
      });  

      window.onload = async () => {  
        // fluxo inicial com √°udios e preview  
        await simulateTyping("üë©‚Äçüç≥ <strong>Chef Larissa Campos:</strong><br>Ol√° tudo bem? Eu me chamo Larissa Campos, fico feliz que esteja interessada nas minhas Receitinhas saud√°veis.");  
        await simulateTyping("üçû Voc√™ est√° diante da oportunidade de aprender a fazer receitas sem gl√∫ten incr√≠veis, fofinhos e deliciosos, que v√£o surpreender todo mundo!<br><br>- 50 receitas exclusivas<br>- Sem Gl√∫ten e Sem Lactose<br>- Ingredientes de f√°cil acesso<br>- ‚Å†Suporte no Whatsapp<br>- Acesso Vital√≠cio<br><br>üî¥ Tudo isso por apenas <strong>R$ 9,90</strong>!");  
        const recordingEl = document.createElement("div");  
        recordingEl.className = "recording-indicator";  
        recordingEl.innerHTML = `<div class="recording-dot"></div>`;  
        document.getElementById("chatBody").appendChild(recordingEl);  
        document.getElementById("chatBody").scrollTop = document.getElementById("chatBody").scrollHeight;  
        await new Promise(r => setTimeout(r, 3000));  
        recordingEl.remove();  
        await showAudioMessage(audioVoice1, false);  
        await waitForAudioToFinish(audioVoice1);  
        await simulateTyping("‚ú® Posso te mostrar uma pr√©via? Voc√™ vai se surpreender com o que tem l√° üòç");  
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
          </div>`);  
      };  

      function waitForAudioToFinish(audio) {  
        return new Promise(resolve => {  
          if (audio.duration > 0 && !audio.paused) {  
            audioEndListener = resolve;  
          } else {  
            setTimeout(resolve, 2000);  
          }  
        });  
      }  

      async function handleOptionClick(option) {  
        appendMessage("user", option);  
        lastOptionSelected = option;  
        currentPackage = option.toLowerCase().includes('completo') ? 'completo' : 'basico';  
        const recordingEl = document.createElement("div");  
        recordingEl.className = "recording-indicator";  
        recordingEl.innerHTML = `<div class="recording-dot"></div>`;  
        document.getElementById("chatBody").appendChild(recordingEl);  
        document.getElementById("chatBody").scrollTop = document.getElementById("chatBody").scrollHeight;  
        await new Promise(r => setTimeout(r, Math.random() * 2000 + 2000));  
        recordingEl.remove();  
        if (currentPackage === 'completo') {  
          shownCompletoDetails = true;  
          await showAudioMessage(audioGuia, false);  
          await waitForAudioToFinish(audioGuia);  
          await showPackageDetailsAndAsk();  
        } else {  
          shownBasicoDetails = true;  
          await showAudioMessage(audioPrevia, false);  
          await waitForAudioToFinish(audioPrevia);  
          await showPreviewAndAsk();  
        }  
      }  

      async function showAudioMessage(audio, autoplay = false) {  
        const audioMessageHTML = `  
          <div class="audio-message">  
            <div class="play-button" onclick="toggleAudio(this)"></div>  
            <div class="audio-info">  
              <div class="audio-wave">  
                ${Array.from({length: 50}, () =>  
                  `<span style="height:${Math.random() * 20 + 5}px"></span>`  
                ).join('')}  
              </div>  
            </div>  
            <audio src="${audio.src}" style="display:none"></audio>  
          </div>  
        `;  
        appendMessage("bot", audioMessageHTML);  
        if (autoplay) {  
          const audioElement = document.querySelector(`audio[src="${audio.src}"]`);  
          if (audioElement) {  
            audioElement.play().catch(e => console.log("Auto-play n√£o permitido:", e));  
          }  
        }  
      }  

      function toggleAudio(button) {  
        const audio = button.parentElement.querySelector('audio');  
        if (audio.paused) {  
          audio.play();  
          button.classList.add('playing');  
          audioEndListener = () => {  
            showTypingIndicator();  
            setTimeout(hideTypingIndicator, 1500);  
          };  
        } else {  
          audio.pause();  
          button.classList.remove('playing');  
          audioEndListener = null;  
        }  
      }  

      async function showPackageDetailsAndAsk() {  
        conversationStage = 1;  
        const detailsHTML = `  
          <div style="margin-top: 10px;">  
            <p>üìö <strong>Pacote Completo - Tudo o que voc√™ vai receber:</strong></p>  
            <p>‚úÖ Guia P√£es Sem Gl√∫ten com 125 receitas</p>  
            <p>‚úÖ Acesso vital√≠cio e todas as atualiza√ß√µes</p>  
            <p>‚úÖ Comunidade exclusiva no WhatsApp</p>  
            <p>‚úÖ 6 E-books extras:</p>  
            <p>‚Ä¢ Doces sem A√ß√∫car</p>  
            <p>‚Ä¢ Bolos Sem Gl√∫ten</p>  
            <p>‚Ä¢ Panetone &amp; Chocotone</p>  
            <p>‚Ä¢ Substitui√ß√µes de Ingredientes</p>  
            <p>‚Ä¢ P√£es Tran√ßados</p>  
            <p>‚Ä¢ Fermenta√ß√£o Natural</p>  
            <p>üî¥ Investimento: <strong>R$ 19,90</strong> (valor promocional)</p>  
          </div>  
        `;  
        await simulateTyping(detailsHTML);  
        await simulateTyping("O que achou? Quer garantir seu acesso?");  
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleBuyInterest('Quero o Pacote Completo')">Quero o Completo üåü</button>  
            <button class="option-button" onclick="handleBuyInterest('Ver Pacote B√°sico')">Ver Pacote B√°sico</button>  
          </div>`);  
      }  

      async function showPreviewAndAsk() {  
        conversationStage = 1;  
        const imagesHTML = `  
          <div style="margin-top: 10px;">  
            <img src="receita1.webp" alt="Receita 1" class="preview-image">  
            <img src="receita2.webp" alt="Receita 2" class="preview-image">  
            <p>üòç Impressionante, n√©? S√£o 50 receitas incr√≠veis!</p>  
            <p>üî¥ Investimento: <strong>R$ 9,90</strong> (valor promocional)</p>  
          </div>  
        `;  
        await simulateTyping(imagesHTML);  
        await simulateTyping("O que voc√™ achou? Posso te mostrar como adquirir?");  
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleBuyInterest('Sim, quero comprar')">Sim, quero comprar</button>  
            <button class="option-button" onclick="handleBuyInterest('Mais informa√ß√µes')">Mais informa√ß√µes</button>  
          </div>`);  
      }  

      const personalizedMessages = [  
        "√ìtima escolha! Voc√™ vai amar o conte√∫do e as receitas v√£o transformar sua cozinha.",  
        "Excelente decis√£o! Prepare-se para receber receitas incr√≠veis e saud√°veis.",  
        "Voc√™ fez uma escolha maravilhosa! Em breve, seu e-book estar√° a caminho.",  
        "Que bom que escolheu este pacote! Tenho certeza de que vai adorar cada receita.",  
        "Perfeito! Seu investimento em receitas saud√°veis vai valer cada centavo."  
      ];  

      function getRandomPersonalized() {  
        const idx = Math.floor(Math.random() * personalizedMessages.length);  
        return personalizedMessages[idx];  
      }  

      async function handleBuyInterest(option) {  
        appendMessage("user", option);  
        const lower = option.toLowerCase();  
        if (lower.includes("ver pacote b√°sico")) {  
          currentPackage = 'basico';  
          shownBasicoDetails = true;  
          await simulateTyping("Claro! Vou mostrar mais sobre o Ebook B√°sico.");  
          await showAudioMessage(audioPrevia, false);  
          await waitForAudioToFinish(audioPrevia);  
          const imagesHTML = `  
            <div style="margin-top: 10px;">  
              <img src="receita1.webp" alt="Receita 1" class="preview-image">  
              <img src="receita2.webp" alt="Receita 2" class="preview-image">  
              <p>üòç Impressionante, n√©? S√£o 50 receitas incr√≠veis!</p>  
              <p>üî¥ Investimento: <strong>R$ 9,90</strong> (valor promocional)</p>  
            </div>  
          `;  
          await simulateTyping(imagesHTML);  
          await simulateTyping("O Ebook B√°sico oferece 50 receitas saborosas, sem gl√∫ten e sem lactose, perfeitas para uma alimenta√ß√£o mais saud√°vel e equilibrada. Por apenas R$ 9,90, clique no bot√£o abaixo para finalizar.");  
          await showBuyOptions();  
        } else if (lower.includes("mais informa√ß√µes")) {  
          if (currentPackage === 'completo') {  
            await simulateTyping("Claro! Meu Pacote Completo inclui 125 receitas de p√£es sem gl√∫ten, acesso vital√≠cio a todas as atualiza√ß√µes, comunidade exclusiva no WhatsApp e 6 e-books extras com t√©cnicas avan√ßadas. Por R$ 19,90, clique no bot√£o abaixo para finalizar.");  
          } else {  
            await simulateTyping("Claro! Meu Ebook B√°sico oferece 50 receitas saud√°veis, sem gl√∫ten e sem lactose, testadas e aprovadas para facilitar seu dia a dia. Por R$ 9,90, clique no bot√£o abaixo para finalizar.");  
          }  
          await showBuyOptions();  
        } else if (lower.includes("quero o pacote completo") || lower.includes("quero o completo")) {  
          currentPackage = 'completo';  
          await simulateTyping(getRandomPersonalized());  
          await simulateTyping("Meu Pacote Completo inclui 125 receitas de p√£es sem gl√∫ten, acesso vital√≠cio, comunidade exclusiva no WhatsApp e 6 e-books extras. Por R$ 19,90, clique no bot√£o abaixo para finalizar.");  
          await showBuyOptions();  
        } else if (lower.includes("50 receitas") || lower.includes("sim, quero comprar") || lower.includes("quero as 50")) {  
          currentPackage = 'basico';  
          await simulateTyping(getRandomPersonalized());  
          await simulateTyping("Meu Ebook B√°sico oferece 50 receitas saborosas, sem gl√∫ten e sem lactose, perfeitas para uma alimenta√ß√£o mais saud√°vel e equilibrada. Por R$ 9,90, clique no bot√£o abaixo para finalizar.");  
          await showBuyOptions();  
        } else {  
          await simulateTyping(getRandomPersonalized());  
          await showBuyOptions();  
        }  
      }  

      async function handlePurchaseClick(packageType) {  
        appendMessage("user", packageType === 'completo' ? 'Quero o Pacote Completo' : 'Quero as 50 Receitas');  
        await simulateTyping("√ìtima escolha! Em breve voc√™ ser√° redirecionado para finalizar a compra.");  
        setTimeout(() => {  
          window.location.href = packageType === 'completo' ? CHECKOUT_COMPLETO : CHECKOUT_BASICO;  
        }, 1000);  
      }  

      async function showBuyOptions() {  
        conversationStage = 2;  
        if (currentPackage === 'basico') {  
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('basico')">  
                QUERO AS 50 RECEITAS - R$ 9,90  
              </button>  
            </div>  
          `);  
          await simulateTyping("Ou, se preferir, voc√™ pode adquirir meu Pacote Completo com muito mais conte√∫do:");  
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);  
        } else {  
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>  
          `);  
          await simulateTyping("Ou, se preferir, voc√™ pode adquirir apenas meu Ebook B√°sico com 50 receitas:");  
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('basico')">  
                QUERO AS 50 RECEITAS - R$ 9,90  
              </button>  
            </div>`);  
        }  
        await simulateTyping("Qualquer d√∫vida √© s√≥ me chamar! üòä");  
      }  

      function handleKeyPress(event) {  
        if (event.key === 'Enter' && !isWaitingResponse) {  
          sendMessage();  
        }  
      }  

      async function sendMessage() {  
        if (isWaitingResponse) return;  
        const inputEl = document.getElementById("userInput");  
        const text = inputEl.value.trim();  
        if (!text) return;  
        appendMessage("user", text);  
        inputEl.value = "";  
        isWaitingResponse = true;  
        showTypingIndicator();  

        const lower = text.toLowerCase();  

        // Perguntas sobre Larissa
        if (isLarissaQuestion(text)) {
          hideTypingIndicator();
          await showLarissaProfile();
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas de confiabilidade
        if (isTrustQuestion(text)) {
          hideTypingIndicator();
          await handleTrustQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre como comprar
        if (isBuyQuestion(text)) {
          hideTypingIndicator();
          await showHowToBuy();
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre conte√∫do
        if (isContentQuestion(text)) {
          hideTypingIndicator();
          await handleContentQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre suporte
        if (isSupportQuestion(text)) {
          hideTypingIndicator();
          await handleSupportQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre comunidade
        if (isCommunityQuestion(text)) {
          hideTypingIndicator();
          await handleCommunityQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre pagamento
        if (isPaymentQuestion(text)) {
          hideTypingIndicator();
          await handlePaymentQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre acesso
        if (isAccessQuestion(text)) {
          hideTypingIndicator();
          await handleAccessQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre ingredientes
        if (isIngredientQuestion(text)) {
          hideTypingIndicator();
          await handleIngredientQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre dificuldade
        if (isDifficultyQuestion(text)) {
          hideTypingIndicator();
          await handleDifficultyQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre tempo
        if (isTimeQuestion(text)) {
          hideTypingIndicator();
          await handleTimeQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre restri√ß√µes
        if (isRestrictionQuestion(text)) {
          hideTypingIndicator();
          await handleRestrictionQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre formato
        if (isFormatQuestion(text)) {
          hideTypingIndicator();
          await handleFormatQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre garantia
        if (isWarrantyQuestion(text)) {
          hideTypingIndicator();
          await handleWarrantyQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre desconto
        if (isDiscountQuestion(text)) {
          hideTypingIndicator();
          await handleDiscountQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre entrega
        if (isDeliveryQuestion(text)) {
          hideTypingIndicator();
          await handleDeliveryQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre qualidade
        if (isQualityQuestion(text)) {
          hideTypingIndicator();
          await handleQualityQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Perguntas sobre benef√≠cios
        if (isBenefitQuestion(text)) {
          hideTypingIndicator();
          await handleBenefitQuestion(text);
          isWaitingResponse = false;
          return;
        }
        
        // Interesse direto via texto
        const purchaseIntent = detectPurchaseIntent(text);
        if (purchaseIntent) {
          hideTypingIndicator();
          await handlePurchaseIntent(purchaseIntent);
          isWaitingResponse = false;
          return;
        }
        
        // Caso geral - resposta mais amig√°vel e direcionada
        hideTypingIndicator();
        await simulateTyping("Entendi! Vou te ajudar com isso üòä");  
        await simulateTyping("Voc√™ pode escolher uma op√ß√£o abaixo ou perguntar mais sobre nossos produtos.");  
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
            <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
          </div>`);  
        isWaitingResponse = false;
      }

      // Fun√ß√µes auxiliares para interpretar perguntas
      function isLarissaQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(quem √©|quem e|de onde|sua hist√≥ria|fala de voc√™|quem √© larissa|quem e larissa|voc√™ √© chef|sua forma√ß√£o)/.test(lowerMsg);
      }

      function isContentQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(conte√∫do|o que tem|quais|o que vem|inclui|tem no|receitas|o que inclui|tem receita)/.test(lowerMsg);
      }

      function isSupportQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(suporte|ajuda|tirar d√∫vida|tirar duvida|d√∫vidas|duvidas|d√∫vida|duvida|perguntar)/.test(lowerMsg);
      }

      function isCommunityQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(comunidade|grupo|whatsapp|zap|grupo do|grupo de|grupo exclusivo)/.test(lowerMsg);
      }

      function isPaymentQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(pagar|pagamento|pre√ßo|valor|boleto|pix|cart√£o|cartao|parcelar|parcela|quanto custa|forma de pagamento|como pagar)/.test(lowerMsg);
      }

      function isAccessQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(acesso|receber|como baixar|como pego|onde pego|onde baixo|entregar|recebo|como recebo|como funciona o acesso)/.test(lowerMsg);
      }

      function isBuyQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(como comprar|como fa√ßo para comprar|como eu compro|como pego|adquirir|comprar|onde compro|quero adquirir)/.test(lowerMsg);
      }

      function isTrustQuestion(message) {  
        const lowerMsg = message.toLowerCase();  
        return /(confi√°vel|confiavel|golpe|seguro|verdade|mentira|depoimento|prova|real|credibilidade|√© s√©rio|confio)/.test(lowerMsg);  
      }
      
      function isIngredientQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(ingrediente|materiais|o que preciso|o que uso|onde compro os ingredientes|f√°cil de encontrar|ingrediente dif√≠cil)/.test(lowerMsg);
      }
      
      function isDifficultyQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(dificuldade|dif√≠cil|f√°cil|simples|complexo|para iniciantes|n√≠vel|experi√™ncia)/.test(lowerMsg);
      }
      
      function isTimeQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(tempo|demora|r√°pido|veloz|quanto tempo|demorado|demorar|dura√ß√£o)/.test(lowerMsg);
      }
      
      function isRestrictionQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(vegano|vegetariano|diab√©tico|diab√©tico|sem a√ß√∫car|sem acucar|sem leite|sem ovo|ovo|leite|soja|restri√ß√£o|alergia|intoler√¢ncia)/.test(lowerMsg);
      }
      
      function isFormatQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(formato|ebook|f√≠sico|impresso|digital|livro|pdf|arquivo|como √© o material|o que recebo)/.test(lowerMsg);
      }
      
      function isWarrantyQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(garantia|devolu√ß√£o|reembolso|se n√£o gostar|se n√£o servir|troca)/.test(lowerMsg);
      }
      
      function isDiscountQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(desconto|promo√ß√£o|oferta|pre√ßo especial|mais barato|valor menor|cupom|c√≥digo)/.test(lowerMsg);
      }
      
      function isDeliveryQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(entrega|enviar|envio|receber|quando chega|prazo de entrega|tempo de entrega|frete)/.test(lowerMsg);
      }
      
      function isQualityQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(qualidade|bom|ruim|vale a pena|recomenda|funciona mesmo|resultados|eficaz)/.test(lowerMsg);
      }
      
      function isBenefitQuestion(message) {
        const lowerMsg = message.toLowerCase();
        return /(benef√≠cio|vantagem|por que comprar|o que ganho|o que vou aprender|o que melhora|pra que serve)/.test(lowerMsg);
      }

      async function handleContentQuestion(text) {
        const lower = text.toLowerCase();
        
        if (lower.includes('pacote completo') || lower.includes('completo') || 
            lower.includes('125 receitas') || lower.includes('e-books extras')) {
          currentPackage = 'completo';
          if (!shownCompletoDetails) {
            shownCompletoDetails = true;
            await simulateTyping("Meu Pacote Completo inclui tudo isso: üéâ<br><br>" +
              "‚úÖ <strong>Guia P√£es Sem Gl√∫ten</strong> com 125 receitas testadas por mim<br>" +
              "‚úÖ <strong>6 E-books extras</strong> com minhas t√©cnicas avan√ßadas<br>" +
              "‚úÖ <strong>Comunidade exclusiva</strong> no WhatsApp comigo e outros alunos<br>" +
              "‚úÖ <strong>Meu suporte completo</strong> para tirar d√∫vidas<br>" +
              "‚úÖ <strong>Acesso vital√≠cio</strong> com todas minhas atualiza√ß√µes<br><br>" +
              "Tudo isso por apenas <strong>R$ 19,90</strong>!");
          } else {
            await simulateTyping("Meu Pacote Completo tem 125 receitas, 6 e-books extras, comunidade no WhatsApp e suporte completo. Por R$ 19,90.");
          }
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          currentPackage = 'basico';
          if (!shownBasicoDetails) {
            shownBasicoDetails = true;
            await simulateTyping("Meu Ebook B√°sico √© perfeito para come√ßar! Voc√™ recebe: üåü<br><br>" +
              "‚úÖ <strong>50 receitas</strong> exclusivas que eu testei pessoalmente<br>" +
              "‚úÖ Todas <strong>sem gl√∫ten e sem lactose</strong><br>" +
              "‚úÖ <strong>Ingredientes f√°ceis</strong> de encontrar<br>" +
              "‚úÖ <strong>Meu WhatsApp direto</strong> para suporte<br>" +
              "‚úÖ <strong>Acesso vital√≠cio</strong> ao material<br><br>" +
              "Por apenas <strong>R$ 9,90</strong>!");
          } else {
            await simulateTyping("Meu Ebook B√°sico tem 50 receitas sem gl√∫ten e lactose, meu suporte e acesso vital√≠cio. Por R$ 9,90.");
          }
          await showBuyOptions();
        }
      }

      async function handleSupportQuestion(text) {
        const lower = text.toLowerCase();
        if (lower.includes('pacote completo') || lower.includes('completo') || currentPackage === 'completo') {
          await simulateTyping("No meu <strong>Pacote Completo</strong> voc√™ tem:<br>" +
            "‚úÖ Meu WhatsApp direto para tirar d√∫vidas comigo<br>" +
            "‚úÖ Acesso √† nossa comunidade exclusiva para trocar ideias<br>" +
            "‚úÖ Ajuda de um profissional especializado que eu indico para d√∫vidas t√©cnicas<br><br>" +
            "√â um suporte completo que eu mesma organizei para voc√™ n√£o ficar na m√£o! üòä");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await simulateTyping("No meu <strong>Ebook B√°sico</strong> voc√™ tem:<br>" +
            "‚úÖ Meu WhatsApp direto para tirar d√∫vidas comigo<br>" +
            "‚úÖ Acesso a um profissional que eu indico para quest√µes t√©cnicas<br><br>" +
            "S√≥ n√£o inclui a comunidade do grupo exclusivo, que vem s√≥ no meu Pacote Completo.");
          await showBuyOptions();
        }
      }

      async function handleCommunityQuestion(text) {
        const lower = text.toLowerCase();
        if (lower.includes('pacote b√°sico') || lower.includes('basico') || currentPackage === 'basico') {
          await simulateTyping("A comunidade exclusiva no WhatsApp √© um benef√≠cio apenas do meu <strong>Pacote Completo</strong>. L√° meus alunos trocam receitas, dicas e eu participo ativamente todos os dias!<br><br>" +
            "No Ebook B√°sico voc√™ tem meu WhatsApp direto, mas n√£o o acesso ao nosso grupo exclusivo.");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await simulateTyping("A <strong>comunidade exclusiva</strong> √© um dos meus maiores orgulhos no Pacote Completo! L√° voc√™:<br>" +
            "‚úÖ Troca receitas e dicas com meus outros alunos<br>" +
            "‚úÖ Participa de lives e materiais exclusivos que eu fa√ßo<br>" +
            "‚úÖ Tem meu contato direto e de outros especialistas que eu convidei<br><br>" +
            "√â um ambiente super acolhedor que eu criei para quem quer se aprofundar!");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        }
      }

      async function handlePaymentQuestion(text) {
        const lower = text.toLowerCase();
        await simulateTyping("A compra √© super segura pela plataforma Kiwify! Voc√™ pode pagar com:<br>" +
          "‚úÖ Cart√£o de cr√©dito (parcelado em at√© 12x)<br>" +
          "‚úÖ Pix (pagamento √† vista com 5% de desconto)<br>" +
          "‚úÖ Boleto banc√°rio<br><br>" +
          "Assim que o pagamento for confirmado, eu mesma te envio o acesso por e-mail. üòä");
        
        if (currentPackage) {
          await showBuyOptions();
        } else {
          appendMessage("bot", `  
            <div class="option-buttons">  
              <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
              <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            </div>`);
        }
      }

      async function handleAccessQuestion(text) {
        await simulateTyping("Assim que seu pagamento for confirmado, eu te envio automaticamente:<br>" +
          "‚úÖ Um e-mail com os links para baixar todos os e-books<br>" +
          "‚úÖ Acesso vital√≠cio para voc√™ baixar quando quiser<br>" +
          "‚úÖ Todas minhas atualiza√ß√µes futuras inclusas<br><br>" +
          "Voc√™ pode acessar pelo celular, computador ou tablet, e tamb√©m imprimir se preferir! Eu mesma cuido para que tudo chegue certinho para voc√™.");
        
        if (currentPackage) {
          await showBuyOptions();
        } else {
          appendMessage("bot", `  
            <div class="option-buttons">  
              <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
              <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            </div>`);
        }
      }

      async function handleTrustQuestion(text) {  
        await simulateTyping("Pode ficar tranquila(a)! Todos meus materiais s√£o digitais e eu mesma envio automaticamente ap√≥s a compra.");  
        appendMessage("bot", `<img src="depoimento.webp" alt="Depoimentos" class="testimonial-image">`);  
        await simulateTyping("Aqui est√° a prova do carinho dos meus clientes! S√£o receitas que eu testei pessoalmente e que realmente funcionam. A Kiwify √© uma plataforma segura que eu escolhi para garantir sua compra.");  
        if (conversationStage >= 1) {  
          await showBuyOptions();  
        } else {  
          appendMessage("bot", `  
            <div class="option-buttons">  
              <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
              <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            </div>`);  
        }  
      }  

      async function handleIngredientQuestion(text) {
        await simulateTyping("Uma das coisas que mais me orgulho √© que minhas receitas usam ingredientes f√°ceis de encontrar!<br><br>" +
          "‚úÖ Voc√™ n√£o vai precisar de nada ex√≥tico ou caro<br>" +
          "‚úÖ Tudo pode ser comprado em mercados comuns<br>" +
          "‚úÖ Uso alternativas acess√≠veis para substituir gl√∫ten e lactose");
        
        if (currentPackage === 'completo') {
          await simulateTyping("No Pacote Completo, ainda ensino t√©cnicas para substituir ingredientes de forma criativa!");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await showBuyOptions();
        }
      }

      async function handleDifficultyQuestion(text) {
        await simulateTyping("Minhas receitas s√£o pensadas para todos os n√≠veis!<br><br>" +
          "‚úÖ Tem receitas super r√°pidas para dias corridos<br>" +
          "‚úÖ Receitas passo a passo detalhadas<br>" +
          "‚úÖ Dicas para iniciantes em cada preparo");
        
        if (currentPackage === 'completo') {
          await simulateTyping("No Pacote Completo, incluo t√©cnicas avan√ßadas para quem quer se especializar!");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await showBuyOptions();
        }
      }

      async function handleTimeQuestion(text) {
        await simulateTyping("Tenho receitas para todos os tempos!<br><br>" +
          "‚úÖ Receitas expressas (menos de 30 minutos)<br>" +
          "‚úÖ Receitas para finais de semana<br>" +
          "‚úÖ Preparos que voc√™ pode congelar e usar depois");
        
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
            <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
          </div>`);
      }

      async function handleRestrictionQuestion(text) {
        const lower = text.toLowerCase();
        let response = "Todas minhas receitas s√£o sem gl√∫ten e sem lactose! ";
        
        if (lower.includes('vegano') || lower.includes('vegetariano')) {
          response += "Al√©m disso, tenho v√°rias op√ß√µes veganas e vegetarianas. ";
        }
        
        if (lower.includes('diab√©tico') || lower.includes('diab√©tico') || lower.includes('a√ß√∫car')) {
          response += "E tamb√©m incluo vers√µes sem a√ß√∫car para quem tem restri√ß√µes. ";
        }
        
        response += "Meus e-books explicam todas as adapta√ß√µes poss√≠veis.";
        
        await simulateTyping(response);
        
        if (currentPackage === 'completo') {
          await simulateTyping("No Pacote Completo, dedico um e-book inteiro a substitui√ß√µes de ingredientes!");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await showBuyOptions();
        }
      }

      async function handleFormatQuestion(text) {
        await simulateTyping("Meus materiais s√£o 100% digitais em formato PDF!<br><br>" +
          "‚úÖ Voc√™ recebe por e-mail assim que confirmar o pagamento<br>" +
          "‚úÖ Pode acessar no celular, tablet ou computador<br>" +
          "‚úÖ Pode imprimir se quiser ter uma c√≥pia f√≠sica<br>" +
          "‚úÖ Atualiza√ß√µes gratuitas para sempre");
        
        await showBuyOptions();
      }

      async function handleWarrantyQuestion(text) {
        await simulateTyping("Ofere√ßo garantia de satisfa√ß√£o de 7 dias!<br><br>" +
          "Se por qualquer motivo voc√™ n√£o gostar do conte√∫do, √© s√≥ me enviar um e-mail que devolvo seu dinheiro sem perguntas.<br><br>" +
          "Mas tenho certeza que voc√™ vai amar minhas receitas! üòä");
        
        await showBuyOptions();
      }

      async function handleDiscountQuestion(text) {
        await simulateTyping("Os pre√ßos que mostrei j√° s√£o promocionais!<br><br>" +
          "üî¥ Ebook B√°sico com 50 receitas por apenas R$ 9,90<br>" +
          "üî¥ Pacote Completo com tudo por apenas R$ 19,90<br><br>" +
          "S√£o valores especiais por tempo limitado. Vale muito a pena!");
        
        appendMessage("bot", `  
          <div class="option-buttons">  
            <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
            <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
          </div>`);
      }

      async function handleDeliveryQuestion(text) {
        await simulateTyping("Como s√£o produtos digitais, voc√™ recebe acesso imediato!<br><br>" +
          "‚úÖ Ap√≥s a confirma√ß√£o do pagamento, voc√™ recebe um e-mail com os links de download<br>" +
          "‚úÖ Sem espera, sem frete, sem preocupa√ß√£o<br>" +
          "‚úÖ Acesso vital√≠cio para baixar quando quiser");
        
        await showBuyOptions();
      }

      async function handleQualityQuestion(text) {
        await simulateTyping("Minhas receitas s√£o testadas e aprovadas por centenas de alunos!<br><br>" +
          "‚úÖ Todas as receitas foram desenvolvidas e testadas por mim<br>" +
          "‚úÖ Fotos reais do passo a passo<br>" +
          "‚úÖ Dicas baseadas na minha experi√™ncia de anos<br><br>" +
          "Veja o que meus alunos dizem:");
          
        appendMessage("bot", `<img src="depoimento.webp" alt="Depoimentos" class="testimonial-image">`);
        
        await simulateTyping("Tenho certeza que voc√™ vai amar! ‚ù§Ô∏è");
        
        await showBuyOptions();
      }

      async function handleBenefitQuestion(text) {
        await simulateTyping("Com meus e-books voc√™ vai:<br><br>" +
          "‚úÖ Descobrir receitas deliciosas sem gl√∫ten e sem lactose<br>" +
          "‚úÖ Surpreender sua fam√≠lia e amigos com p√£es incr√≠veis<br>" +
          "‚úÖ Economizar dinheiro fazendo em casa<br>" +
          "‚úÖ Ter mais sa√∫de e bem-estar<br>" +
          "‚úÖ Aprender t√©cnicas que v√£o transformar sua cozinha");
        
        if (currentPackage === 'completo') {
          await simulateTyping("E com o Pacote Completo, voc√™ ainda tem acesso a uma comunidade exclusiva e suporte personalizado!");
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);
        } else {
          await showBuyOptions();
        }
      }

      function detectPurchaseIntent(message) {  
        const lowerMsg = message.toLowerCase();  
        if (/quero o pacote completo|125 receitas|pacote completo|quero completo|vou querer completo|completo por favor|me interessa o completo/.test(lowerMsg)) {  
          return { package: 'completo' };  
        }  
        if (/quero as 50 receitas|ebook b√°sico|50 receitas|b√°sico|basico|quero o b√°sico|quero o ebook b√°sico|me interessa o b√°sico/.test(lowerMsg)) {  
          return { package: 'basico' };  
        }  
        if (/quero comprar|adquirir|garantir|vou levar|me interessa|quero adquirir|quero esse|vou comprar|quero agora/.test(lowerMsg)) {  
          return { package: currentPackage || 'basico' };  
        }  
        return null;  
      }  

      async function handlePurchaseIntent(purchaseIntent) {
        if (purchaseIntent.package === 'completo') {  
          currentPackage = 'completo';  
          if (!shownCompletoDetails) {  
            shownCompletoDetails = true;  
            await simulateTyping("√ìtima escolha! Meu Pacote Completo inclui:<br><br>" +
              "‚úÖ 125 receitas de p√£es sem gl√∫ten que eu testei<br>" +
              "‚úÖ 6 e-books extras com minhas t√©cnicas<br>" +
              "‚úÖ Comunidade exclusiva no WhatsApp comigo<br>" +
              "‚úÖ Meu suporte completo e vital√≠cio<br><br>" +
              "Por apenas <strong>R$ 19,90</strong>!");  
          } else {  
            await simulateTyping("√ìtima escolha! Meu Pacote Completo por R$ 19,90.");  
          }  
          appendMessage("bot", `  
            <div class="buy-options">  
              <button class="buy-button" onclick="handlePurchaseClick('completo')">  
                QUERO O PACOTE COMPLETO - R$ 19,90  
              </button>  
            </div>`);  
        } else {  
          currentPackage = 'basico';  
          if (!shownBasicoDetails) {  
            shownBasicoDetails = true;  
            await simulateTyping("√ìtima escolha! Meu Ebook B√°sico oferece:<br><br>" +
              "‚úÖ 50 receitas saborosas que eu testei<br>" +
              "‚úÖ Todas sem gl√∫ten e sem lactose<br>" +
              "‚úÖ Ingredientes de f√°cil acesso<br>" +
              "‚úÖ Meu WhatsApp direto para suporte<br>" +
              "‚úÖ Acesso vital√≠cio<br><br>" +
              "Por apenas <strong>R$ 9,90</strong>!");  
          } else {  
            await simulateTyping("√ìtima escolha! Meu Ebook B√°sico por R$ 9,90.");  
          }  
          await showBuyOptions();  
        }  
      }

      async function showLarissaProfile() {  
        const profileHTML = `  
          <img src="larissa.webp" alt="Larissa Campos" class="profile-image">  
          <p>Eu sou a Larissa Campos, nutricionista e chef de Florian√≥polis (SC). Minha paix√£o pela cozinha come√ßou por amor ‚Äî amor pela minha m√£e, que tem intoler√¢ncia √† lactose, e pelo meu irm√£o, que √© cel√≠aco.</p>  
          <p>Crio receitas sem gl√∫ten e sem lactose que sejam simples, gostosas e acolhedoras, para ajudar pessoas a redescobrirem o prazer de comer bem.</p>  
        `;  
        await simulateTyping(profileHTML);  
        if (conversationStage === 0) {  
          appendMessage("bot", `  
            <div class="option-buttons">  
              <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
              <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            </div>`);  
        }  
      }  

      async function showHowToBuy() {  
        await simulateTyping("<p>A compra √© bem simples e segura:</p><p>1. Clique no bot√£o do e-book que voc√™ quer</p><p>2. Voc√™ vai para a p√°gina de pagamento da Kiwify</p><p>3. Preencha seus dados e forma de pagamento</p><p>4. Ap√≥s aprova√ß√£o, eu mesma te envio o acesso por e-mail</p>");  
        if (currentPackage) {  
          await showBuyOptions();  
        } else {  
          appendMessage("bot", `  
            <div class="option-buttons">  
              <button class="option-button" onclick="handleOptionClick('As 50 Receitas')">As 50 Receitas ‚ù§Ô∏è</button>  
              <button class="option-button" onclick="handleOptionClick('Pacote Completo')">Pacote Completo ü•π</button>  
            </div>`);  
        }  
      }  

      function showTypingIndicator() {  
        if (!typingEl) {  
          typingEl = document.createElement("div");  
          typingEl.className = "typing-indicator";  
          typingEl.innerHTML = "<span></span><span></span><span></span>";  
          document.getElementById("chatBody").appendChild(typingEl);  
          document.getElementById("chatBody").scrollTop = document.getElementById("chatBody").scrollHeight;  
        }  
      }  

      function hideTypingIndicator() {  
        if (typingEl) {  
          typingEl.remove();  
          typingEl = null;  
        }  
      }  

      async function simulateTyping(message, delay = 1500) {  
        showTypingIndicator();  
        await new Promise(r => setTimeout(r, delay));  
        hideTypingIndicator();  
        if (message) {  
          appendMessage("bot", message);  
        }  
      }  

      function appendMessage(sender, message) {  
        const chatBody = document.getElementById("chatBody");  
        const msgEl = document.createElement("div");  
        msgEl.className = `message ${sender}`;  
        msgEl.innerHTML = message;  
        chatBody.appendChild(msgEl);  
        chatBody.scrollTop = chatBody.scrollHeight;  
      }  
    </script>
  </body>  
</html>
